{"ast":null,"code":"var _jsxFileName = \"/home/isaac/Final/Ajali-B/frontend/src/components/Modal/modal.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useContext } from 'react';\nimport './modal.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Modal = ({\n  id,\n  latitude,\n  longitude,\n  description,\n  isOpen,\n  setIsOpen\n}) => {\n  _s();\n  const [latitud, setLatitude] = useState(latitude);\n  const [longitud, setLongitude] = useState(longitude);\n  const [descriptio, setDescription] = useState(description);\n  const [images, setImages] = useState([]);\n  if (isOpen === false) {\n    return null;\n  }\n  const handleFetchImages = async () => {\n    try {\n      const token = localStorage.getItem('access_token');\n      if (!token) {\n        throw new Error('Token not found');\n      }\n      const response = await axios.get(`/incidents/${id}`, {\n        method: 'GET',\n        headers: {\n          'Content-type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (response.status !== 200) {\n        throw new Error('Failed to get images');\n      }\n      console.log(response.data);\n      setImages(response.data.media_attachments);\n    } catch (error) {\n      console.error('Failed to get images!');\n    }\n  };\n  const handleSubmit = () => {\n    fetch(`/reports/${id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        latitude: latitud,\n        longitude: longitud,\n        description: descriptio\n      })\n    }).then(r => {\n      if (!r.ok) {\n        throw new Error(`Failed to patch message: ${r.statusText}`);\n      }\n      return r.json();\n    }).then(updatedMessage => {\n      console.log(updatedMessage);\n    }).catch(error => {\n      console.error('Error fetching message', error.message);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"overlay\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"modalbutton\",\n        onClick: () => {\n          setIsOpen(false);\n        },\n        className: \"close\",\n        children: \"X\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal__content\",\n        children: [/*#__PURE__*/_jsxDEV(\"form\", {\n          id: \"modal_form\",\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"latsdivs\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"lat\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Latitude\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                id: \"latitude\",\n                placeholder: latitude,\n                value: latitud,\n                onChange: event => setLatitude(event.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"long\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Longitude\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                id: \"longitude\",\n                placeholder: longitude,\n                value: longitud,\n                onChange: event => setLongitude(event.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"imgdiv\",\n            children: images && images.map(im => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"imgdiv__images\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: im.file_url,\n                alt: \"image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 37\n              }, this)\n            }, im.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n              type: \"text\",\n              id: \"description\",\n              placeholder: description,\n              value: descriptio,\n              onChange: event => setDescription(event.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"buttondiv\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"reportbutton\",\n              children: \"Finish\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 45\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mapbox\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 9\n  }, this);\n};\n_s(Modal, \"EHnopmU2JTG5oi2mh74DSCQLHxQ=\");\n_c = Modal;\nexport default Modal;\nvar _c;\n$RefreshReg$(_c, \"Modal\");","map":{"version":3,"names":["useState","useContext","jsxDEV","_jsxDEV","Modal","id","latitude","longitude","description","isOpen","setIsOpen","_s","latitud","setLatitude","longitud","setLongitude","descriptio","setDescription","images","setImages","handleFetchImages","token","localStorage","getItem","Error","response","axios","get","method","headers","status","console","log","data","media_attachments","error","handleSubmit","fetch","body","JSON","stringify","then","r","ok","statusText","json","updatedMessage","catch","message","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","value","onChange","event","target","map","im","src","file_url","alt","_c","$RefreshReg$"],"sources":["/home/isaac/Final/Ajali-B/frontend/src/components/Modal/modal.jsx"],"sourcesContent":["import { useState, useContext } from 'react';\nimport './modal.css';\n\nconst Modal = ({ id, latitude, longitude, description, isOpen, setIsOpen }) => {\n    const [latitud, setLatitude] = useState(latitude);\n    const [longitud, setLongitude] = useState(longitude);\n    const [descriptio, setDescription] = useState(description);\n    const [images, setImages] = useState([]);\n\n\n    if (isOpen === false) {\n        return null;\n    }\n\n\n    const handleFetchImages = async () => {\n\n        try {\n            const token = localStorage.getItem('access_token');\n            if(!token) {\n                throw new Error('Token not found')\n            }    \n            const response = await axios.get(`/incidents/${id}`, {\n                method: 'GET',\n                headers: {\n                    'Content-type': 'application/json',\n                    'Authorization': `Bearer ${token}`\n                }\n            });\n            if (response.status !== 200) {\n                throw new Error('Failed to get images')\n            }\n            console.log(response.data)\n            setImages(response.data.media_attachments)              \n        } catch (error) {\n            console.error('Failed to get images!');\n        }\n    }\n\n\n    const handleSubmit = () => {\n        fetch(`/reports/${id}`, {\n            method: \"PATCH\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({\n                latitude: latitud,\n                longitude: longitud,\n                description: descriptio,\n            }),\n        })\n            .then((r) => {\n                if (!r.ok) {\n                    throw new Error(`Failed to patch message: ${r.statusText}`);\n                }\n                return r.json();\n            })\n            .then((updatedMessage) => {\n                console.log(updatedMessage)\n            })\n            .catch((error) => {\n                console.error('Error fetching message', error.message)\n            });\n    }\n\n    return (\n        <div className='overlay'>\n            <div className='modal'>\n                <button id='modalbutton' onClick={() => { setIsOpen(false) }} className='close'>X</button>\n                <div className='modal__content'>\n                    <form id='modal_form' onSubmit={handleSubmit}>\n                        <div className='latsdivs'>\n                            <div id='lat'>\n                                <label>Latitude</label>\n                                <input\n                                    type='number'\n                                    id='latitude'\n                                    placeholder={latitude}\n                                    value={latitud}\n                                    onChange={(event) => setLatitude(event.target.value)}\n                                />\n                            </div>\n                            <div id='long'>\n                                <label>Longitude</label>\n                                <input\n                                    type='number'\n                                    id='longitude'\n                                    placeholder={longitude}\n                                    value={longitud}\n                                    onChange={(event) => setLongitude(event.target.value)}\n                                />\n                            </div>\n                        </div>\n                        <div className='imgdiv'>\n                            {images && images.map((im) => (\n                                <div key={im.id} className='imgdiv__images'>\n                                    <img src={im.file_url} alt='image' />\n                                </div>\n                            ))}\n                        </div>\n                        <div>\n                            <textarea\n                                type='text'\n                                id='description'\n                                placeholder={description}\n                                value={descriptio}\n                                onChange={(event) => setDescription(event.target.value)}\n                            ></textarea>\n                        </div>\n                        <div id='buttondiv'><button type='submit' className='reportbutton'>Finish</button></div>\n                    </form>\n                    <div className='mapbox'>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Modal;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}