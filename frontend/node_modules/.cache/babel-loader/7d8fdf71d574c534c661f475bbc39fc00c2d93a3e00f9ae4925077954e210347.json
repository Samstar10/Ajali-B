{"ast":null,"code":"var _jsxFileName = \"/home/isaac/Final/Ajali-B/frontend/src/components/Modal/modal.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useContext, useEffect } from 'react';\nimport './modal.css';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Modal = ({\n  id,\n  latitude,\n  longitude,\n  description,\n  isOpen,\n  setIsOpen\n}) => {\n  _s();\n  const [latitud, setLatitude] = useState(latitude);\n  const [longitud, setLongitude] = useState(longitude);\n  const [descriptio, setDescription] = useState(description);\n  const [images, setImages] = useState([]);\n  if (isOpen === false) {\n    return null;\n  }\n  useEffect(() => {\n    const handleFetchImages = async () => {\n      try {\n        const token = localStorage.getItem('access_token');\n        if (!token) {\n          throw new Error('Token not found');\n        }\n        const response = await axios.get(`/incidents/${id}`, {\n          method: 'GET',\n          headers: {\n            'Content-type': 'application/json',\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        if (response.status !== 200) {\n          throw new Error('Failed to get images');\n        }\n        console.log(response.data);\n        setImages(response.data.media_attachments);\n      } catch (error) {\n        console.error('Failed to get images!');\n      }\n    };\n  }, [isOpen]);\n  const handleSubmit = () => {\n    fetch(`/reports/${id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        latitude: latitud,\n        longitude: longitud,\n        description: descriptio\n      })\n    }).then(r => {\n      if (!r.ok) {\n        throw new Error(`Failed to patch message: ${r.statusText}`);\n      }\n      return r.json();\n    }).then(updatedMessage => {\n      console.log(updatedMessage);\n    }).catch(error => {\n      console.error('Error fetching message', error.message);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"overlay\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"modalbutton\",\n        onClick: () => {\n          setIsOpen(false);\n        },\n        className: \"close\",\n        children: \"X\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal__content\",\n        children: [/*#__PURE__*/_jsxDEV(\"form\", {\n          id: \"modal_form\",\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"latsdivs\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"lat\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Latitude\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 78,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                id: \"latitude\",\n                placeholder: latitude,\n                value: latitud,\n                onChange: event => setLatitude(event.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"long\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Longitude\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                id: \"longitude\",\n                placeholder: longitude,\n                value: longitud,\n                onChange: event => setLongitude(event.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"imgdiv\",\n            children: images && images.map(im => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"imgdiv__images\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: im.file_url,\n                alt: \"image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 37\n              }, this)\n            }, im.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n              type: \"text\",\n              id: \"description\",\n              placeholder: description,\n              value: descriptio,\n              onChange: event => setDescription(event.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"buttondiv\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"reportbutton\",\n              children: \"Finish\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 45\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mapbox\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 9\n  }, this);\n};\n_s(Modal, \"vRGV0TEw0sjWe+j1RQffiWHMA5A=\");\n_c = Modal;\nexport default Modal;\nvar _c;\n$RefreshReg$(_c, \"Modal\");","map":{"version":3,"names":["useState","useContext","useEffect","axios","jsxDEV","_jsxDEV","Modal","id","latitude","longitude","description","isOpen","setIsOpen","_s","latitud","setLatitude","longitud","setLongitude","descriptio","setDescription","images","setImages","handleFetchImages","token","localStorage","getItem","Error","response","get","method","headers","status","console","log","data","media_attachments","error","handleSubmit","fetch","body","JSON","stringify","then","r","ok","statusText","json","updatedMessage","catch","message","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","value","onChange","event","target","map","im","src","file_url","alt","_c","$RefreshReg$"],"sources":["/home/isaac/Final/Ajali-B/frontend/src/components/Modal/modal.jsx"],"sourcesContent":["import { useState, useContext, useEffect } from 'react';\nimport './modal.css';\nimport axios from 'axios';\n\nconst Modal = ({ id, latitude, longitude, description, isOpen, setIsOpen }) => {\n    const [latitud, setLatitude] = useState(latitude);\n    const [longitud, setLongitude] = useState(longitude);\n    const [descriptio, setDescription] = useState(description);\n    const [images, setImages] = useState([]);\n\n\n    if (isOpen === false) {\n        return null;\n    }\n\n\n    useEffect(() => {\n        const handleFetchImages = async () => {\n\n            try {\n                const token = localStorage.getItem('access_token');\n                if(!token) {\n                    throw new Error('Token not found')\n                }    \n                const response = await axios.get(`/incidents/${id}`, {\n                    method: 'GET',\n                    headers: {\n                        'Content-type': 'application/json',\n                        'Authorization': `Bearer ${token}`\n                    }\n                });\n                if (response.status !== 200) {\n                    throw new Error('Failed to get images')\n                }\n                console.log(response.data)\n                setImages(response.data.media_attachments)              \n            } catch (error) {\n                console.error('Failed to get images!');\n            }\n        }        \n    }, [isOpen])\n\n\n    const handleSubmit = () => {\n        fetch(`/reports/${id}`, {\n            method: \"PATCH\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({\n                latitude: latitud,\n                longitude: longitud,\n                description: descriptio,\n            }),\n        })\n            .then((r) => {\n                if (!r.ok) {\n                    throw new Error(`Failed to patch message: ${r.statusText}`);\n                }\n                return r.json();\n            })\n            .then((updatedMessage) => {\n                console.log(updatedMessage)\n            })\n            .catch((error) => {\n                console.error('Error fetching message', error.message)\n            });\n    }\n\n    return (\n        <div className='overlay'>\n            <div className='modal'>\n                <button id='modalbutton' onClick={() => { setIsOpen(false) }} className='close'>X</button>\n                <div className='modal__content'>\n                    <form id='modal_form' onSubmit={handleSubmit}>\n                        <div className='latsdivs'>\n                            <div id='lat'>\n                                <label>Latitude</label>\n                                <input\n                                    type='number'\n                                    id='latitude'\n                                    placeholder={latitude}\n                                    value={latitud}\n                                    onChange={(event) => setLatitude(event.target.value)}\n                                />\n                            </div>\n                            <div id='long'>\n                                <label>Longitude</label>\n                                <input\n                                    type='number'\n                                    id='longitude'\n                                    placeholder={longitude}\n                                    value={longitud}\n                                    onChange={(event) => setLongitude(event.target.value)}\n                                />\n                            </div>\n                        </div>\n                        <div className='imgdiv'>\n                            {images && images.map((im) => (\n                                <div key={im.id} className='imgdiv__images'>\n                                    <img src={im.file_url} alt='image' />\n                                </div>\n                            ))}\n                        </div>\n                        <div>\n                            <textarea\n                                type='text'\n                                id='description'\n                                placeholder={description}\n                                value={descriptio}\n                                onChange={(event) => setDescription(event.target.value)}\n                            ></textarea>\n                        </div>\n                        <div id='buttondiv'><button type='submit' className='reportbutton'>Finish</button></div>\n                    </form>\n                    <div className='mapbox'>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Modal;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}